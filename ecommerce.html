<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Commerce Portal - Niramay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Poppins", sans-serif;
        transition: background 0.3s, color 0.3s;
        opacity: 0;
        animation: fadeIn 1s ease-in forwards;
      }
      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }
      body.dark {
        background-color: #0a0a0a;
        color: #f1f1f1;
      }
      body.light {
        background-color: #ffffff;
        color: #1a1a1a;
      }

      .hover-glow:hover {
        box-shadow: 0 0 25px rgba(34, 197, 94, 0.8);
        transform: translateY(-8px) scale(1.03);
        transition: all 0.4s ease-in-out;
      }
      .btn-animate {
        position: relative;
        overflow: hidden;
      }
      .btn-animate::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.35),
          transparent
        );
        transition: left 0.6s;
      }
      .btn-animate:hover::before {
        left: 100%;
      }
      .scrolled {
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(6px);
        transition: all 0.4s ease;
      }
      .n-toast {
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 24px;
        background: #111827;
        color: #fff;
        padding: 10px 16px;
        border-radius: 8px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
        z-index: 60;
        opacity: 0.95;
      }
    </style>
  </head>

  <body class="dark min-h-screen flex flex-col">
    <!-- Navbar -->
    <header
      id="navbar"
      class="flex justify-between items-center p-4 bg-black shadow-lg sticky top-0 z-40 transition-all"
    >
      <h1 class="text-2xl font-bold text-green-400">Niramay</h1>
      <nav class="hidden md:flex gap-8 font-semibold">
        <a href="index.html" class="hover:text-green-400">Home</a>
        <a href="ecommerce.html" class="text-green-400">E-Commerce</a>
        <a href="contact.html" class="hover:text-green-400">Contact</a>
      </nav>

      <div class="flex gap-4 items-center">
        <button
          id="toggle-theme"
          class="px-3 py-1 bg-green-500 text-black rounded-lg font-semibold hover:bg-green-600 transition"
        >
          ðŸŒ“
        </button>

        <!-- Cart button (ID and badge) -->
        <button id="cart-btn" class="relative text-2xl" title="View cart">
          ðŸ›’
          <span
            id="cart-count"
            class="absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full"
            >0</span
          >
        </button>
      </div>
    </header>

    <!-- Hero -->
    <section class="text-center py-16 px-6">
      <h2 class="text-5xl font-bold text-green-400 mb-6">
        ðŸŒ¾ Niramay E-Commerce
      </h2>
      <p class="text-lg max-w-3xl mx-auto text-gray-300">
        Buy high-quality crops directly from farmers â€” fresh, traceable, and
        responsibly produced.
      </p>
    </section>

    <!-- Categories -->
    <section class="flex flex-wrap justify-center gap-4 mb-12 px-6">
      <button
        class="px-6 py-2 bg-green-500 text-black font-bold rounded-lg hover:bg-green-600 transition btn-animate"
      >
        Cereals
      </button>
      <button
        class="px-6 py-2 bg-green-500 text-black font-bold rounded-lg hover:bg-green-600 transition btn-animate"
      >
        Pulses
      </button>
      <button
        class="px-6 py-2 bg-green-500 text-black font-bold rounded-lg hover:bg-green-600 transition btn-animate"
      >
        Oilseeds
      </button>
      <button
        class="px-6 py-2 bg-green-500 text-black font-bold rounded-lg hover:bg-green-600 transition btn-animate"
      >
        Cash Crops
      </button>
    </section>

    <!-- Product Grid -->
    <section
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 px-6 mb-16"
    >
      <!-- Crop 1: Wheat -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="wheat.jpeg"
          alt="Wheat"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Wheat (Premium)</h3>
        <p class="text-gray-300 mt-2">High-yield, well-cleaned wheat grains.</p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹45 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Wheat (Premium)"
          data-price="45"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 2: Basmati Rice -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="basmati rice.jpeg"
          alt="Basmati Rice"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Basmati Rice</h3>
        <p class="text-gray-300 mt-2">
          Long-grain aromatic basmati â€” best for special meals.
        </p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹60 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Basmati Rice"
          data-price="60"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 3: Maize -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="corn.jpeg"
          alt="Maize"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Maize (Corn)</h3>
        <p class="text-gray-300 mt-2">
          Fresh golden maize â€” suitable for feed and food.
        </p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹30 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Maize (Corn)"
          data-price="30"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 4: Moong -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="green gram.jpeg"
          alt="Green Gram"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Green Gram (Moong)</h3>
        <p class="text-gray-300 mt-2">Protein-rich pulses, trusted quality.</p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹90 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Green Gram (Moong)"
          data-price="90"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 5: Soybeans -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="soyabean.jpeg"
          alt="Soybeans"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Soybeans</h3>
        <p class="text-gray-300 mt-2">High-protein soybeans for oil & feed.</p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹70 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Soybeans"
          data-price="70"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 6: Sugarcane -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="sugarcane.jpeg"
          alt="Sugarcane"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Sugarcane (Fresh)</h3>
        <p class="text-gray-300 mt-2">
          Juicy, freshly harvested sugarcane sticks.
        </p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹10 / stick</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Sugarcane (Fresh)"
          data-price="10"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 7: Chickpea -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="chickpea.jpeg"
          alt="Chickpea"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Chickpea (Chana)</h3>
        <p class="text-gray-300 mt-2">
          Nutritious chickpeas, ideal for dals & snacks.
        </p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹85 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Chickpea (Chana)"
          data-price="85"
        >
          Add to Cart
        </button>
      </div>

      <!-- Crop 8: Mustard Seeds -->
      <div class="bg-gray-800 p-6 rounded-2xl hover-glow text-center">
        <img
          src="mustard seed.jpeg"
          alt="Mustard Seeds"
          class="mx-auto mb-4 rounded-lg shadow-md object-cover h-36 w-full"
        />
        <h3 class="text-xl font-bold text-green-400">Mustard Seeds</h3>
        <p class="text-gray-300 mt-2">
          Cold-pressed quality mustard seeds for oil & spice.
        </p>
        <p class="mt-2 text-lg font-bold text-yellow-400">â‚¹120 / kg</p>
        <button
          class="mt-4 px-4 py-2 bg-green-500 text-black rounded-lg font-semibold btn-animate hover:bg-green-600 add-to-cart"
          data-name="Mustard Seeds"
          data-price="120"
        >
          Add to Cart
        </button>
      </div>
    </section>

    <!-- /Product Grid -->

    <!-- Footer -->
    <footer class="bg-black text-center p-4 mt-auto text-gray-400">
      Â© 2025 Niramay | Smart Farming Marketplace ðŸŒ¿
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const cartBtn = document.getElementById("cart-btn");
        const cartCount = document.getElementById("cart-count");
        const addBtns = document.querySelectorAll(".add-to-cart");
        const toastTimeout = 1600;

        // Read cart (array of {name, price, qty})
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Update the badge to number of UNIQUE items in cart
        function updateCartBadge() {
          cart = JSON.parse(localStorage.getItem("cart")) || [];
          cartCount.textContent = cart.length;
        }

        // Robust helper to ensure old malformed price strings (with commas) are interpreted correctly
        function normalizePrice(p) {
          if (typeof p === "number") return p;
          return Number(String(p).replace(/[^\d.]/g, "")) || 0;
        }

        // Add to cart handler
        addBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            const name = btn.dataset.name;
            const price = normalizePrice(btn.dataset.price);

            // load current cart (in case other tab changed it)
            cart = JSON.parse(localStorage.getItem("cart")) || [];

            // find existing item
            const existing = cart.find((item) => item.name === name);
            if (existing) existing.qty++;
            else cart.push({ name, price, qty: 1 });

            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartBadge();
            showToast(`${name} added to cart`);
          });
        });

        // Cart icon -> go to cart page
        document.getElementById("cart-btn").addEventListener("click", () => {
          window.location.href = "cart.html";
        });

        // theme toggle (keeps existing behavior)
        const toggleBtn = document.getElementById("toggle-theme");
        toggleBtn?.addEventListener("click", () => {
          document.body.classList.toggle("dark");
          document.body.classList.toggle("light");
        });

        // small toast (non-blocking)
        function showToast(msg) {
          const t = document.createElement("div");
          t.className = "n-toast";
          t.textContent = msg;
          document.body.appendChild(t);
          setTimeout(() => (t.style.opacity = "0"), toastTimeout - 250);
          setTimeout(() => t.remove(), toastTimeout);
        }

        // initial badge render
        updateCartBadge();
      });
    </script>
  </body>
</html>
